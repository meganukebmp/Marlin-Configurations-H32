# Aquila X2 base Configuration

the base configuration for the Voxelab Aquila X2 (H32)



## Changes to `Configuration.h`

| Option                                                                                                                                                                                                                                                         | Explanation                                                                                            |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------ |
| `#define MOTHERBOARD BOARD_AQUILA_V101`                                                                                                                                                                                                                        | select the aquila X2 motherboard configuration | 
| `#define SERIAL_PORT 2`                                                                                                                                                                                                                                        | configures the Serial Port to the correct one                                                          |
| `#define BAUDRATE 115200`                                                                                                                                                                                                                                      | configures the Serial Port baudrate. higher may be possible, but not tested                            |
| `#define CUSTOM_MACHINE_NAME "Voxelab Aquila X2 H32"` </br> `#define MACHINE_UUID "342b0449-c119-4bed-8329-80d6343ca97a"`                                                                                                                                      | proposed custom machine name and uuid \*                                                               |
| `#define X_DRIVER_TYPE TMC2208_STANDALONE` </br> `#define Y_DRIVER_TYPE TMC2208_STANDALONE` </br> `#define Z_DRIVER_TYPE TMC2208_STANDALONE` </br> `#define E0_DRIVER_TYPE TMC2208_STANDALONE`                                                                 | the voxlab aquila X2 uses TMC2208 stepper drivers                                                      |
| `#define TEMP_SENSOR_BED 1`                                                                                                                                                                                                                                    | tells marlin that the printer has a heated bed with sensor                                             |
| `#define BED_MAXTEMP 120`                                                                                                                                                                                                                                      | maximum bed temperature \*                                                                             |
| `#define HEATER_0_MINTEMP 0`                                                                                                                                                                                                                                   | minimum heater temperature \*                                                                          |
| `#define BED_MINTEMP 0`                                                                                                                                                                                                                                        | minimum bed temperature \*                                                                             |
| `#define DEFAULT_Kp 28.72` </br> `#define DEFAULT_Ki 2.62` </br> `#define DEFAULT_Kd 78.81`                                                                                                                                                                    | default PID configuration for hotend \*                                                                |
| `#define DEFAULT_bedKp 462.10` </br> `#define DEFAULT_bedKi 85.47` </br> `#define DEFAULT_bedKd 624.59`                                                                                                                                                        | default PID configuration for bed \*                                                                   |
| `#define EXTRUDE_MINTEMP 180`                                                                                                                                                                                                                                  | minimum temperature before beginning to extrude                                                        |
| `#define EXTRUDE_MAXLENGTH 1000`                                                                                                                                                                                                                               | the maximum length of a single extrusion. this is about the length of the bowden tube on the aquila X2 |
| `#define Z_MIN_PROBE_ENDSTOP_HIT_STATE LOW`                                                                                                                                                                                                                    | inverts the signal of the Z_MIN probe.                                                                 |
| `#define ENDSTOP_INTERRUPTS_FEATURE`                                                                                                                                                                                                                           | enable interrupts for endstops                                                                         |
| `#define DEFAULT_AXIS_STEPS_PER_UNIT { 80, 80, 400, 93 }`                                                                                                                                                                                                      | axis steps per unit. this matches the aquila X2's default configuration \*                             |
| `#define DEFAULT_MAX_FEEDRATE { 500, 500, 5, 25 }` </br> `#define DEFAULT_MAX_ACCELERATION { 500, 500, 100, 1000 }` </br> `#define DEFAULT_ACCELERATION 500` </br> `#define DEFAULT_RETRACT_ACCELERATION 500` </br> `#define DEFAULT_TRAVEL_ACCELERATION 1000` | default machine limits of the aquila X2 \*                                                             |
| `#define CLASSIC_JERK`                                                                                                                                                                                                                                         | enable jerking. by default aquila X2 has this enabled.                                                 |
| `#define Z_MIN_PROBE_USES_Z_MIN_ENDSTOP_PIN` </br> `#define USE_PROBE_FOR_Z_HOMING`                                                                                                                                                                            | Z_MIN probe configuration. untested                                                                    |
| `#define NOZZLE_TO_PROBE_OFFSET { -43, -22, 0 }` (bltouch) </br> OR </br> `#define NOZZLE_TO_PROBE_OFFSET { 0, 0, 0 }` (manual probing)                                                                                                                        | Z_MIN probe offset for bltouch and manual probing. may be a good idea to measure this yourself         |
| `#define XY_PROBE_FEEDRATE 3000`                                                                                                                                                                                                                               | X and Y travel speed while probing. from aquila X2 default configuration                               |
| `#define MULTIPLE_PROBING 2`                                                                                                                                                                                                                                   | Probe twice with weighted average. from aquila X2 default configuration                                |
| `#define Z_AFTER_PROBING 5`                                                                                                                                                                                                                                    | The probe offset after a probe. from aquila X2 default configuration                                   |
| `#define Z_PROBE_OFFSET_RANGE_MIN -10` </br> `#define Z_PROBE_OFFSET_RANGE_MAX 10`                                                                                                                                                                             | Z Probe min and max offset ranges. from aquila X2 default configuration                                |
| `#define INVERT_Y_DIR false` </br> `#define INVERT_Z_DIR true`                                                                                                                                                                                                 | dont invert Y axis, and do invert Z axis                                                               |
| `#define X_BED_SIZE 220` </br> `#define Y_BED_SIZE 220` </br>`#define Z_MAX_POS 250`                                                                                                                                                                           | defines bed dimensions                                                                                 |
| `#define FILAMENT_RUNOUT_SENSOR`                                                                                                                                                                                                                               | enable the filament runout sensor                                                                      |
| `#define FIL_RUNOUT_STATE HIGH`                                                                                                                                                                                                                                | sets the filament runout sensor trip state. needed when `FILAMENT_RUNOUT_SENSOR` is enabled            |
| `#define FIL_RUNOUT_PULLDOWN`                                                                                                                                                                                                                                  | use an internal pulldown resistor for the filament sensor. (Since it's active LOW)                     |
| `#define GRID_MAX_POINTS_X 4`                                                                                                                                                                                                                                  | 4 grid points per auto bed level dimension. (4x4). from X2 default configuration                       |
| `#define EEPROM_SETTINGS`                                                                                                                                                                                                                                      | enabled the i2c eeprom of the aquila X2                                                                |
| `#define EEPROM_AUTO_INIT`                                                                                                                                                                                                                                     | auto-reset the eeprom contents on errors \*                                                            |
| `#define PREHEAT_1_TEMP_HOTEND 200` </br> `#define PREHEAT_1_TEMP_BED 60` </br> `#define PREHEAT_1_FAN_SPEED 255`                                                                                                                                              | the default temperature settings for using PLA. from aquila X2 default configuration                   |
| `#define PREHEAT_2_TEMP_HOTEND 240` </br> `#define PREHEAT_2_TEMP_BED 70` </br> `#define PREHEAT_2_FAN_SPEED 255`                                                                                                                                              | the default temperature settings for using PLA. from aquila X2 default configuration                   |
| `#define NOZZLE_PARK_FEATURE`                                                                                                                                                                                                                                  | enable nozzle parking \*                                                                               |
| `#define NOZZLE_PARK_POINT { (X_MIN_POS), (Y_MIN_POS), 20 }`                                                                                                                                                                                                   | park the nozzle at exactly 0, 0, 20. from aquila X2 default configuration                              |
| `#define SDSUPPORT`                                                                                                                                                                                                                                            | enable support for sd printing from the aquila X2's sdcard slot                                        |
| `#define ENCODER_PULSES_PER_STEP 4`                                                                                                                                                                                                                            | sets up the rotary encoder to use 4 pulses for one step. from aquila X2 default configuration          |
| `#define ENCODER_STEPS_PER_MENU_ITEM 1`                                                                                                                                                                                                                        | sets up the encoder to use one step for moving through the menus items. from aquila X2 default configuration |
| `#define REVERSE_ENCODER_DIRECTION`                                                                                                                                                                                                                            | reverses the direction of the knob on the LCD                                                          |
| `#define LCD_FEEDBACK_FREQUENCY_DURATION_MS 2` </br> `#define LCD_FEEDBACK_FREQUENCY_HZ 5000`                                                                                                                                                                  | configures the LCD's beeper \*                                                                         |
| One of: </br> `#define DWIN_CREALITY_LCD` </br> `#define DWIN_LCD_PROUI` </br> `#define DWIN_CREALITY_LCD_JYERSUI` </br> `#define DWIN_MARLINUI_PORTRAIT` </br> `#define DWIN_MARLINUI_LANDSCAPE`                                                              | enables the DWIN LCD of the printer. any of these options should work                                  |
| `#define FAN_SOFT_PWM`                                                                                                                                                                                                                                         | Use software PWM to drive the fan. Required by H32 HAL                                                 |

## Changes to `Configuration_adv.h`

| Option                                                                                                 | Explanation                                                                                    |
| ------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------- |
| `#define BED_HYSTERESIS 3`                                                                             | the +- degrees in which the heater should turn on. ie if we want 200C but are at 197, there is no need to heat until 196. from aquila X2 default configuration. |
| `#define WATCH_TEMP_PERIOD 50`                                                                         | how long to wait for the target temperature to be reached. from aquila X2 default configuration |
| `#define THERMAL_PROTECTION_BED_PERIOD 180`                                                            | how long to let the bed be above the target before halting. from aquila X2 default configuration |
| `#define WATCH_BED_TEMP_PERIOD 180`                                                                    | how long to wait for the target bed temperature to be reached. from aquila X2 default configuration |
| `#define FAN_MIN_PWM 50`                                                                               | sets the minimum pwm level of the cooling fan. below 50, the fan may not start up              |
| `#define SHOW_TEMP_ADC_VALUES`                                                                         | show the temperature value from the ADC. from aquila X2 default configuration                  |
| `#define BLTOUCH_DELAY 500` </br> `#define BLTOUCH_SET_5V_MODE` </br> `#define BLTOUCH_FORCE_MODE_SET` | additional configuration for bltouch. untested                                                 |
| `#define ADAPTIVE_STEP_SMOOTHING`                                                                      | enables step smoothing \*                                                                      |
| `#define POWER_LOSS_RECOVERY`                                                                          | enables power loss recovery feature.                                                           |
| `#define PLR_ENABLED_DEFAULT`                                                                          | enables power loss recovery by default. from aquila X2 default configuration                   |
| `#define SDCARD_SORT_ALPHA` </br> `#define FOLDER_SORTING 1` </br> `#define SDSORT_USES_RAM true`      | the H32 has enough SRAM, so sorting using a RAM buffer is fine                                 |
| `#define NO_SD_HOST_DRIVE`                                                                             | the aquila X2's sdcard is connected directly to the SOC. there is no host drive                |
| `#define LCD_SERIAL_PORT 3`                                                                            | The DWIN LCD is on Serial port 3. from aquila X2 default configuration                         |
| `#define BABYSTEPPING` </br> `#define BABYSTEP_MULTIPLICATOR_Z 40`                                     | enables baby stepping. the Z multiplicator is default of the aquila X2 and may be ok to change |
| `#define EMERGENCY_PARSER`                                                                             | enables the emergency parser. not required, but highly recommended                             |
| `#define MIN_ARC_SEGMENT_MM 1` </br> `#define MIN_CIRCLE_SEGMENTS 24`                                  | configures settings for drawing argcs and circles. from default aquila X2 configuration        |
| `#define NO_TIMEOUTS 200`                                                                              | send a 'wait' message every 1s as a keep-alive \*                                              |
| `#define ADVANCED_OK`                                                                                  | enables advanced ok feature \*                                                                 |
| `#define SERIAL_FLOAT_PRECISION 4`                                                                     | sets the precision of floats printed to serial. may be ok to change                            |
| `#define ADVANCED_PAUSE_FEATURE`                                                                       | enable advanced pause. Needed for the filament sensor to work.                                 |
| `#define FILAMENT_CHANGE_UNLOAD_LENGTH 1000`                                                           | the length of a full filament unload is 10cm on aquila X2                                      |
| `#define FILAMENT_CHANGE_FAST_LOAD_LENGTH 1000`                                                        | there is no "fast loading" on aquila X2. still use 10cm                                        |

> \* these options may be adjusted to match your specific machine or needs. the values shown here are safe defaults
